package com.andreymironov.common.finalizervulnerability;

import java.util.concurrent.atomic.AtomicLong;

public class Resource {
    public static AtomicLong IMPORTANT_ACTIONS_COUNT = new AtomicLong();

    public Resource() {
        if (!securityCheck()) {
            throw new SecurityException("Access denied!!!");
        }
    }

    public void performImportantActions() {
        System.out.println("Performing some important actions on the created instance...");
        IMPORTANT_ACTIONS_COUNT.incrementAndGet();
    }

    // for demonstration purposes we temporarily deny permission to constructor
    public static boolean securityCheck() {
        return false;
    }
}
